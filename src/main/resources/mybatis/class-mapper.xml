<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Class">
	<insert id="classInsert">
		insert into class values(#{classPart},#{className},#{classSeq},#{classPoint},#{proCode},#{proName},#{dept},#{classTime},#{classRoom},#{limit},#{grade},#{classGoal},#{classMethod},#{classEvaluation},#{classReferences},'AR','',sysdate)
	</insert>
	<insert id="classScheduleInsert">
		insert into classSchedule values(#{classSeq},#{proCode},#{week1},#{week2},#{week3},#{week4},#{week5},#{week6},#{week7},#{week8},#{week9},#{week10},#{week11},#{week12},#{week13},#{week14},#{week15})
	</insert>
	<update id="classUpdate">
		update class set classPart=#{classPart},className=#{className},classPoint=#{classPoint},dept=#{dept},classTime=#{classTime},classRoom=#{classRoom},limit= #{limit},grade=#{grade},classGoal=#{classGoal},classMethod=#{classMethod},classEvaluation=#{classEvaluation},classReferences=#{classReferences},reqState = 'AR' where classSeq=#{classSeq}  
	</update>
	<update id="classScheduleUpdate">
		update classSchedule set week1=#{week1},week2=#{week2},week3=#{week3},week4=#{week4},week5=#{week5},week6=#{week6},week7=#{week7},week8=#{week8},week9=#{week9},week10=#{week10},week11=#{week11},week12=#{week12},week13=#{week13},week14=#{week14},week15=#{week15} where classSeq=#{classSeq}
	</update>
	<select id="classReqList" resultType="kh.spring.dto.ClassDTO">
		select * from class where reqState = 'AR'
	</select>
	<select id="classListProCode" resultType="kh.spring.dto.ClassDTO">
		select * from class where proCode = #{proCode}
	</select>
	<select id="classList" resultType="kh.spring.dto.ClassDTO">
		select * from class where reqState ='A'
	</select>
	<delete id="classDel">
		delete from class where reqState in('AR','DC','C') and classSeq in
		<foreach separator="," close=")" open="(" item="i" collection="list">#{i.classSeq} </foreach>
	</delete>
	<delete id="scheduleDel">
		delete from classSchedule where classSeq in	
		<foreach separator="," close=")" open="(" item="i" collection="list">#{i.classSeq} </foreach>
	</delete>
	<update id="reqUpdAtoDR">
		update class set reqState = 'DR' where reqState ='A' and classSeq in
		<foreach separator="," close=")" open="(" item="i" collection="list">#{i.classSeq} </foreach>
	</update>
	<update id="reqUpdARtoA">
		update class set reqState = 'A', rejectMsg ='' where reqState ='AR' and classSeq in
		<foreach separator="," close=")" open="(" item="i" collection="list">#{i.classSeq} </foreach>
	</update>
	<update id="reqUpdDRtoDC">
		update class set reqState = 'DC' where reqState ='DR' and classSeq in
		<foreach separator="," close=")" open="(" item="i" collection="list">#{i.classSeq} </foreach>
	</update>
	<select id="classListSeq" resultType="kh.spring.dto.ClassDTO">
		select * from class where classSeq = #{classSeq}
	</select>
	<select id="classScheduleSeq" resultType="kh.spring.dto.ClassScheduleDTO">
		select * from classSchedule where classSeq = #{classSeq}
	</select>
	<select id="classReqListA" resultType="kh.spring.dto.ClassDTO">
		select * from class where reqState in ('AR','DR')
	</select>
	<update id="rejectMsgInsert">
		update class set reqState = 'C', rejectMsg = #{rejectMsg}
		where reqState = 'AR' and classSeq in
		<foreach separator="," close=")" open="(" item="i" collection="list">#{i.classSeq} </foreach>
	</update>
</mapper>